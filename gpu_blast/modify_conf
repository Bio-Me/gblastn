#blast!/bin/bash

#NCBI BLAST 2.2.26 installation script is not able to find touch on some Linux systems. 
#NCBI BLAST has a fix here http://www.ncbi.nlm.nih.gov/viewvc/v1?view=rev&revision=53139
#but that was released after version 2.2.26, thus I replace the five files to fix this problem

cxx_dir=$1/ncbi-blast-2.2.26+-src/c++

if [ -f $cxx_dir/src/build-system/Makefile.meta.in ]; then
    cp  $cxx_dir/src/build-system/Makefile.meta.in             $cxx_dir/src/build-system/Makefile.meta.in.backup
    cp   ./ncbi_blast_files/Makefile.meta.in                   $cxx_dir/src/build-system/
else
    echo "\"$cxx_dir/src/build-system/Makefile.meta.in\" could not be found. Exiting..."
    exit 1
fi

if [ -f $cxx_dir/src/build-system/Makefile.mk.in ]; then
    cp  $cxx_dir/src/build-system/Makefile.mk.in             $cxx_dir/src/build-system/Makefile.mk.in.backup
    cp   ./ncbi_blast_files/Makefile.mk.in                   $cxx_dir/src/build-system/
else
    echo "\"$cxx_dir/src/build-system/Makefile.mk.in\" could not be found. Exiting..."
    exit 1
fi


if [ -f $cxx_dir/src/build-system/configure ]; then
    cp  $cxx_dir/src/build-system/configure       $cxx_dir/src/build-system/configure.backup
    cp   ./ncbi_blast_files/configure             $cxx_dir/src/build-system/
else
    echo "\"$cxx_dir/src/build-system/configure\" could not be found. Exiting..."
    exit 1
fi

if [ -f $cxx_dir/src/build-system/configure.ac ]; then
    cp  $cxx_dir/src/build-system/configure.ac       $cxx_dir/src/build-system/configure.ac.backup
    cp   ./ncbi_blast_files/configure.ac            $cxx_dir/src/build-system/
else
    echo "\"$cxx_dir/src/build-system/configure.ac\" could not be found. Exiting..."
    exit 1
fi
